## map的底层数据结构
- hamp
  - count
  - bmap
  - 扩容数
  - 溢出
  - oldmap
  - hash
- bmap
  - tophash
  - key
  - value

## key/value对齐

## 什么是内存对齐
8字节，64字节缓存
从大到小  
避免多次读取、缓存失效
## 什么是伪共享缓存失效

## map的扩容时机
- 当前数/容量>6.5 双倍扩容
- B<15溢出数=当前数 B>15溢出数=2^15 等量扩容
## map的扩容机制
渐进式扩容，不会一次性完成。  
分为两步：
1. 挂在oldbucket、创建新的两倍or等量数组   
2. 每一次增删改，检查当前是否完成迁移，没有的化，对当前和另外随机选一个迁移

## map是否并发安全
不安全。不支持并发读写，直接fetch panic
## map的遍历特点
随机
## map如何顺序读
slice读取key，排序以后顺序读
## map的key是否需要可比较
必须可比较，不然获取值时无法确定是否是你需要的key/value
## 可以对map的key/value取地址吗
不可以，扩容以后地址会变，发现直接报错
## key删除过程
tophash置为empty，移除key/value但是内存不释放，直到map为nil
## 可以变删除边遍历吗
看有没有并发？如果是一个协程内可以。

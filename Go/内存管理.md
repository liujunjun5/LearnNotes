## 内存
* CPU-员工
* 内存办公桌
* 磁盘档案馆

作为存储数据、指令和中间结果的区域
## TCmalloc 模型
- page 8KB
- span 4个或者8个page
- mcache 存储不同规格的span引用数组，一般是8B-32KB，P私有的
- mcenter 不同P共有的，存储更多的span，一般一个mcenter存储一种
- mheap > 32KB

## 栈
和gortinue生命周期一致     
指针移动的方式处理  
存储局部变量  
编译器管理  
如果栈空间不够（2KB一个，不容易出现）：出现以后会发生扩容  
G持有一个动态的栈，每一个函数调用会生成一个栈帧
### 小于 < 32KB
- 先在MCache中获取
- 在全局栈中获取
- 在全局大栈中获取
- 在Heap中获取

### 大于32kb
在大栈/heap中获取

## 堆
需要自由的生命管理，大对象，逃逸情况会用到堆
堆管理比较复杂：
- 三级缓存
- mcache
- mcenter
- mheap
分配和回收复杂

## 逃逸分析

## 内存泄露
- g未释放——死循环，等待
- channel
- 大数组被引用
- map
- 定时器

## 如何定位内存泄漏
trace和pprof
